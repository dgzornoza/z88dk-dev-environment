/tmp/tmpXXjhaOcj.asm:
     1                          MODULE nata_asm
     2                          LINE 0, "src/nata.asm"
src/nata.asm:
                                
     1                          SECTION code_user
     2                          
     3                          PUBLIC _neg_and_triple_a  ; export C name "neg_and_triple_a"
     4                          
     5                          EXTERN _a                 ; access global C variable "a"
     6                          EXTERN _negate_odd_a      ; access global C function "negate_odd_a"
     7                          
     8                          _neg_and_triple_a:
     9                          
    10  0000  cd0000               call _negate_odd_a     ; call C function "negate_odd_a()"
    11                          
    12                             ; triple contents of array a[]
    13                          
    14  0003  0605                 ld b,5               ; array a[] has five members
    15  0005  210000               ld hl,_a             ; hl = &a[0]
    16                          
    17                          loop:
    18                          
    19  0008  e5                   push hl              ; save address in array a[]
    20                          
    21  0009  5e                   ld e,(hl)
    22  000a  23                   inc hl
    23  000b  56                   ld d,(hl)            ; de = int member of a[]
    24                          
    25  000c  6b                   ld l,e
    26  000d  62                   ld h,d
    27  000e  29                   add hl,hl
    28  000f  19                   add hl,de
    29  0010  eb                   ex de,hl             ; de = int * 3
    30                          
    31  0011  e1                   pop hl               ; hl = address in array a[] of int read
    32                          
    33  0012  73                   ld (hl),e
    34  0013  23                   inc hl
    35  0014  72                   ld (hl),d            ; replace int with its value tripled
    36  0015  23                   inc hl               ; hl points to next array entry
    37                          
    38  0016  10f0                 djnz loop            ; do it for all five members of array a[]
    39  0018  c9                   ret
    40                          
